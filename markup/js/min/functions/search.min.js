var searchAutoComplete=function(){var a,b=new Array,c=!1,d=-1,e="",f="";return{fillSearchBox:function(){document.getElementById("search").value=e+""},checkKey:function(g){var h,i=this;if(!g)var g=event;if(g.keyCode?h=g.keyCode:g.which&&(h=g.keyCode),b.length>0&&c)switch(h){case 38:return 0>=d?d=b.length-1:d--,i.fyldKeyLayer(),!0;case 40:return d<b.length&&d++,d==b.length&&(d=0),i.fyldKeyLayer(),!0}c&&(e=document.getElementById("search").value.toLowerCase(),e=e.replace(/^\s*|\s*$/g,""),e=e.replace(/januar|februar|marts|april|maj|juni|juli|august|september|oktober|november|december/g,""),e=e.replace(/\*/g,""),e=e.replace(/\s*(,)\s*/g," "),e=e.replace(/\s*(\x2B)\s*/g," "),e!=f&&(bogstaver=e.replace(/\W/g,""),bogstaver=e.replace(/\d/g,""),bogstaver.length>2?(f=e,e=escape(e),document.getElementById("keywordlayer").style.display="block",a=callIframe(a,"noegleramme","http://bwfoto.dk/php/GetKeywordsFrame.php?start="+escape(e)+"&sprog=d&niveau=1&getterfunction=searchAutoComplete.getKey"),a||alert("fejl ved hetning af keywords")):(f="",b=[],document.getElementById("keywordlayer").style.display="block")))},getKey:function(a){b=a,b.length>0&&(d=-1,this.fyldKeyLayer())},getElementPosition:function(a){for(var b=document.getElementById(a),c=0,d=0;b;)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;return-1!=navigator.userAgent.indexOf("Mac")&&"undefined"!=typeof document.body.leftMargin&&(c+=document.body.leftMargin,d+=document.body.topMargin),{left:c,top:d}},fyldKeyLayer:function(){thelayer=document.getElementById("keywordlayer"),thelayer.style.display="none",search=document.getElementById("search");var a="<div class='search-autocomplete-list'>";a+="<ul>";for(var c=0;c<b.length;c++){var e=b[c];a+="<li"+(d==c?" class='active' ":"")+" onClick='document.getElementById('search').value='"+e.replace(/'/,"\\'")+"'; document.searchform.submit();'>",a+=e,a+="</li>"}a+="</ul>",-1!=d&&(document.getElementById("search").value=b[d]),this.writit(a,thelayer),thelayer.style.display="block",ord=document.getElementById("search").value,document.getElementById("search").focus(),document.getElementById("search").value=ord},hideAutocomplete:function(){var a=document.getElementById("keywordlayer");a.style.display="none"},checkSearch:function(){var a=new String(document.getElementById("search").value);if(""==a||" "==a)return alert("Du har ikke indtastet et søgeord"),!1;if(-1!=d){var c=b[d];document.getElementById("search").value=c}if(c=document.getElementById("search").value.toLowerCase(),c=c.replace(/\s*(,)\s*/g," "),test=c.replace(/\bjanuar|februar|marts|april|maj|juni|juli|august|september|oktober|november|december\b/g,""),test=test.replace(/\s*(,)\s*/g," "),c=c.replace(/\s*(\x2B)\s*/g," "),""==test)return alert("Der kan ikke søges på månedsnavne alene.\nDer kan dog søges på månedsnavn i kombination med et eller flere andre søgeord"),!1;document.getElementById("search").value=c.replace(/^\s*|\s*$/g,"");var e=document.getElementById("keywordlayer");return e.style.display="none",!0},writit:function(a,b){document.getElementById?(b.innerHTML="",b.innerHTML=a):document.all?b.innerHTML=a:document.layers&&(text2='<P CLASS="testclass">'+a+"</P>",b.document.open(),b.document.write(text2),b.document.close())},init:function(){var a=this,b=$("#search");b.focus(function(){c=!0}),b.keyup(function(){a.checkKey()}),b.blur(function(){c=!1})}}}();