var searchAutoComplete=function(){var a,b,c=new Array,d=!1,e=-1,f="",g="";return{fillSearchBox:function(){document.getElementById("search").value=f+""},checkKey:function(h){var i,j=this;if(!h)var h=event;if(h.keyCode?i=h.keyCode:h.which&&(i=h.keyCode),c.length>0&&d)switch(i){case 38:return 0>=e?e=c.length-1:e--,j.fyldKeyLayer(),!0;case 40:return e<c.length&&e++,e==c.length&&(e=0),j.fyldKeyLayer(),!0}d&&(f=document.getElementById("search").value.toLowerCase(),f=f.replace(/^\s*|\s*$/g,""),f=f.replace(/januar|februar|marts|april|maj|juni|juli|august|september|oktober|november|december/g,""),f=f.replace(/\*/g,""),f=f.replace(/\s*(,)\s*/g," "),f=f.replace(/\s*(\x2B)\s*/g," "),f!=g&&(bogstaver=f.replace(/\W/g,""),bogstaver=f.replace(/\d/g,""),bogstaver.length>2?(g=f,f=escape(f),document.getElementById("keywordlayer").style.display="block",a=callIframe(a,"noegleramme","http://bwfoto.dk/php/GetKeywordsFrame.php?start="+escape(f)+"&sprog="+b+"&niveau=1&getterfunction=searchAutoComplete.getKey"),a||alert("fejl ved hetning af keywords")):(g="",c=[],document.getElementById("keywordlayer").style.display="block")))},getKey:function(a){c=a,c.length>0&&(e=-1,this.fyldKeyLayer())},getElementPosition:function(a){for(var b=document.getElementById(a),c=0,d=0;b;)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;return-1!=navigator.userAgent.indexOf("Mac")&&"undefined"!=typeof document.body.leftMargin&&(c+=document.body.leftMargin,d+=document.body.topMargin),{left:c,top:d}},fyldKeyLayer:function(){thelayer=document.getElementById("keywordlayer"),thelayer.style.display="none",search=document.getElementById("search");var a="<div class='search-autocomplete-list'>";a+="<ul>";for(var b=0;b<c.length;b++){var d=c[b];a+="<li"+(e==b?" class='active' ":"")+" onClick='document.getElementById('search').value='"+d.replace(/'/,"\\'")+"'; document.searchform.submit();'>",a+=d,a+="</li>"}a+="</ul>",-1!=e&&(document.getElementById("search").value=c[e]),this.writit(a,thelayer),thelayer.style.display="block",ord=document.getElementById("search").value,document.getElementById("search").focus(),document.getElementById("search").value=ord},hideAutocomplete:function(){var a=document.getElementById("keywordlayer");a.style.display="none"},checkSearch:function(){var a=new String(document.getElementById("search").value);if(""==a||" "==a)return alert("Du har ikke indtastet et søgeord"),!1;if(-1!=e){var b=c[e];document.getElementById("search").value=b}if(b=document.getElementById("search").value.toLowerCase(),b=b.replace(/\s*(,)\s*/g," "),test=b.replace(/\bjanuar|februar|marts|april|maj|juni|juli|august|september|oktober|november|december\b/g,""),test=test.replace(/\s*(,)\s*/g," "),b=b.replace(/\s*(\x2B)\s*/g," "),""==test)return alert("Der kan ikke søges på månedsnavne alene.\nDer kan dog søges på månedsnavn i kombination med et eller flere andre søgeord"),!1;document.getElementById("search").value=b.replace(/^\s*|\s*$/g,"");var d=document.getElementById("keywordlayer");return d.style.display="none",!0},writit:function(a,b){document.getElementById?(b.innerHTML="",b.innerHTML=a):document.all?b.innerHTML=a:document.layers&&(text2='<P CLASS="testclass">'+a+"</P>",b.document.open(),b.document.write(text2),b.document.close())},init:function(){var a=this,c=$("#search");b=window.location.href.indexOf("/eng/")>-1?"u":"d",c.focus(function(){d=!0}),c.keyup(function(b){a.checkKey(b)}),c.blur(function(){d=!1})}}}();